# 🧪 Phase 1 PoC テスト・検証ガイド

## 📋 テスト目的

Phase 1 PoC の完了基準を満たすための検証を実施します。

### 完了基準

- ✅ 5分間の音声入力が Gemini で要約される
- ✅ Markdownが正しく生成される
- ✅ 決定事項抽出率 > 80%
- ✅ API失敗時にエラーメッセージが表示される

---

## 🚀 事前準備

### 1. Gemini API Key の設定

`.env.local` ファイルに API Key を設定:

```bash
cd "c:\Users\tgch1\Desktop\ZBC-migration-kit\Dynamic Field Note"
code .env.local
```

```env
EXPO_PUBLIC_GEMINI_API_KEY=your_actual_api_key_here
```

### 2. 開発サーバーの起動

```bash
npm start
```

- Expo Go アプリでQRコードをスキャン
- または iPhone Simulator で実行

---

## 📝 テストケース

### テスト 1: 基本的な要約機能

**目的**: テキスト入力からMarkdown生成までの基本フローを確認

**手順**:

1. アプリを起動
2. 入力欄に [サンプル1: プロジェクト会議](./demo-samples.md#サンプル-1-プロジェクト会議) を貼り付け
3. 「要約実行」ボタンをタップ
4. Markdownプレビューを確認

**期待結果**:

- ✅ ローディングインジケーターが表示される
- ✅ 3-5秒以内に要約が完了する
- ✅ 決定事項・ToDo・課題が正しく抽出される
- ✅ Markdown形式で整形されている
- ✅ スナックバーで完了通知が表示される

**判定基準**:

- 決定事項: 「設計フェーズを2週間で完了」「Dockerコンテナを使用」が含まれている
- ToDo: 「設計書の作成」「環境構築ドキュメント」が含まれている
- 課題: 「外部APIの仕様書」「リソース不足」が含まれている

---

### テスト 2: 音声バッファ機能

**目的**: 5秒間隔のバッファ蓄積と無音検知を確認

**手順**:

1. 入力欄に短いテキストを入力
2. 5秒待機
3. バッファ情報を確認（「バッファ: 1件」と表示されるはず）
4. さらにテキストを追加
5. 5秒待機
6. バッファ情報を確認（「バッファ: 2件」と表示されるはず）
7. 30秒間何も入力しない
8. 「送信準備完了 (silence)」が表示されるか確認

**期待結果**:

- ✅ 5秒ごとにバッファカウントが増加する
- ✅ 「最終入力: X秒前」が1秒ごとに更新される
- ✅ 30秒無音で「✅ 送信準備完了 (silence)」が表示される

---

### テスト 3: 長文テキストの要約

**目的**: 5分間相当の長文テキストで要約精度を確認

**手順**:

1. [demo-samples.md](./demo-samples.md) の全5サンプルを連結
2. 入力欄に貼り付け（約1000文字）
3. 「要約実行」ボタンをタップ
4. 要約結果を分析

**期待結果**:

- ✅ 10秒以内に要約が完了する
- ✅ 各サンプルの決定事項が統合されている
- ✅ 重複が削除されている
- ✅ 優先度が整理されている

**決定事項抽出率の計算**:

```
抽出率 = (正しく抽出された決定事項の数 / 全決定事項の数) × 100

例:
- 全決定事項: 10件
- 正しく抽出: 9件
- 抽出率: 90% → 合格（80%以上）
```

---

### テスト 4: エラーハンドリング

**目的**: API失敗時の挙動を確認

#### 4-1. API Key エラー

**手順**:

1. `.env.local` の API Key を無効な値に変更
2. アプリを再起動
3. テキストを入力して「要約実行」
4. エラーメッセージを確認

**期待結果**:

- ✅ 赤色のエラーメッセージが表示される
- ✅ 「再試行」ボタンが表示される
- ✅ アプリがクラッシュしない

#### 4-2. ネットワークエラー

**手順**:

1. 機内モードをONにする
2. テキストを入力して「要約実行」
3. エラーメッセージを確認
4. 機内モードをOFFにして「再試行」

**期待結果**:

- ✅ ネットワークエラーのメッセージが表示される
- ✅ 「再試行」で正常に要約が実行される

#### 4-3. 空テキストエラー

**手順**:

1. 入力欄が空の状態で「要約実行」をタップ

**期待結果**:

- ✅ 「テキストを入力してください」とスナックバーが表示される
- ✅ API呼び出しが実行されない

---

### テスト 5: UI/UX 確認

**目的**: ユーザビリティを確認

**チェックリスト**:

- [ ] 入力欄が使いやすい（複数行入力可能）
- [ ] ボタンが押しやすい（タップ領域が十分）
- [ ] プレビューが読みやすい（フォントサイズ適切）
- [ ] ローディング中はボタンが無効化される
- [ ] スクロールが滑らか
- [ ] キーボードがプレビューを隠さない
- [ ] 横画面でも正常に動作する

---

## 📊 テスト結果記録シート

### 基本情報

- **実施日**: **\*\*\*\***\_**\*\*\*\***
- **実施者**: **\*\*\*\***\_**\*\*\*\***
- **デバイス**: **\*\*\*\***\_**\*\*\*\***
- **Expo Version**: **\*\*\*\***\_**\*\*\*\***

### テスト結果

| テストケース                  | 結果    | 備考            |
| ----------------------------- | ------- | --------------- |
| テスト1: 基本的な要約機能     | ✅ / ❌ |                 |
| テスト2: 音声バッファ機能     | ✅ / ❌ |                 |
| テスト3: 長文テキストの要約   | ✅ / ❌ | 抽出率: \_\_\_% |
| テスト4-1: API Key エラー     | ✅ / ❌ |                 |
| テスト4-2: ネットワークエラー | ✅ / ❌ |                 |
| テスト4-3: 空テキストエラー   | ✅ / ❌ |                 |
| テスト5: UI/UX 確認           | ✅ / ❌ |                 |

### 決定事項抽出率の詳細

| サンプル  | 全決定事項数 | 抽出成功数 | 抽出率 |
| --------- | ------------ | ---------- | ------ |
| サンプル1 |              |            | %      |
| サンプル2 |              |            | %      |
| サンプル3 |              |            | %      |
| サンプル4 |              |            | %      |
| サンプル5 |              |            | %      |
| **合計**  |              |            | **%**  |

### 発見された問題

1.
2.
3.

### 改善提案

1.
2.
3.

---

## ✅ Phase 1 完了判定

以下の全てが満たされた場合、Phase 1 PoC は完了とします：

- [ ] テスト1-3が全て合格
- [ ] テスト4のエラーハンドリングが全て動作
- [ ] テスト5のUI/UXが概ね良好
- [ ] **決定事項抽出率が80%以上**
- [ ] クリティカルなバグがない

---

## 🎯 ステークホルダーデモ

### デモシナリオ

1. **オープニング（1分）**
   - プロジェクト概要説明
   - Phase 1の目的

2. **デモ実演（5分）**
   - アプリ起動
   - サンプル1を使った要約実演
   - Markdownプレビュー確認
   - バッファ機能の説明

3. **精度確認（2分）**
   - 決定事項の抽出精度を説明
   - ToDoと課題の整理を確認

4. **Q&A（2分）**
   - 質問対応
   - フィードバック収集

### デモ用準備

- [ ] iPhone 12 を充電済み
- [ ] Gemini API Key 設定済み
- [ ] サンプルテキストをクリップボードにコピー
- [ ] ネットワーク接続確認
- [ ] スクリーンミラーリング準備（必要に応じて）

---

## 📝 次のステップ

Phase 1 完了後の作業:

1. テスト結果をまとめて Issue #8 に報告
2. 発見された問題を Issue として起票
3. Phase 2（UI/UX整備）の準備
4. README.md の更新

---

**🤖 Generated with Claude Code**
