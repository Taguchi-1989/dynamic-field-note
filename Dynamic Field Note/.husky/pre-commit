#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit guardrails..."

# 1. TypeScriptå‹ãƒã‚§ãƒƒã‚¯
echo "1ï¸âƒ£ TypeScript type checking..."
npm run type-check || {
  echo "âŒ TypeScript errors detected!"
  exit 1
}

# 2. ESLint
echo "2ï¸âƒ£ ESLint checking..."
npm run lint || {
  echo "âŒ ESLint errors detected!"
  exit 1
}

# 3. Prettier
echo "3ï¸âƒ£ Prettier format checking..."
npm run format:check || {
  echo "âŒ Format errors detected! Run: npm run format"
  exit 1
}

# 4. Smoke Testsï¼ˆè»½é‡ãƒ†ã‚¹ãƒˆï¼‰
echo "4ï¸âƒ£ Running smoke tests..."
npm run test:smoke || {
  echo "âŒ Smoke tests failed!"
  exit 1
}

echo "âœ… All guardrails passed! Committing..."
